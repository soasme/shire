{% from "flask_user/_macros.html" import render_checkbox_field, render_submit_field %}

{%- macro login_form(form) -%}
<form action="{{ url_for('user.login') }}"
  method="POST"
  class="form pure-form pure-form-stacked" role="form">
  <fieldset>
    {{ form.hidden_tag() }}

    <label for="{{form.username.id}}">{{form.username.label.text}}</label>
    {{ form.username(tabindex=110, autocomplete='off') }}
    {% for e in (form.username.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    <label for="{{form.password.id}}">{{form.password.label.text}}</label>
    {{ form.password(tabindex=110, autocomplete='off') }}
    {% for e in (form.password.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    {% if config.USER_ENABLE_REMEMBER_ME %}
    {{ render_checkbox_field(form.remember_me, tabindex=130) }}
    {% endif %}

    <p><a href="{{ url_for('user.forgot_password') }}" tabindex='0'>
      {%trans%}Forgot your Password?{%endtrans%}</a></p>

    <button type="submit" class="pure-button pure-button-primary" tabindex=150>Sign in</button>
  </fieldset>
</form>
{%- endmacro %}

{%- macro register_form(form) -%}
<form action="{{ url_for('user.register') }}"
  method="POST"
  class="form pure-form pure-form-stacked" role="form">
  <fieldset>
    {{ form.hidden_tag() }}

    <label for="{{form.username.id}}">{{form.username.label.text}}</label>
    {{ form.username(tabindex=110, autocomplete='off') }}
    {% for e in (form.username.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    {% if config.USER_ENABLE_EMAIL %}
    <label for="{{form.email.id}}">{{form.email.label.text}}</label>
    {{ form.email(tabindex=110, autocomplete='off') }}
    {% for e in (form.email.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}
    {% endif %}

    <label for="{{form.password.id}}">{{form.password.label.text}}</label>
    {{ form.password(tabindex=110, autocomplete='off') }}
    {% for e in (form.password.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    <p><a href="{{ url_for('user.login') }}" tabindex='0'>
      {%trans%}Already registered? Sign in.{%endtrans%}</a></p>

    <button type="submit" class="pure-button pure-button-primary" tabindex=150>
      Sign Up
    </button>
  </fieldset>
</form>
{%- endmacro %}

{%- macro change_password_form(form) -%}
<form action="{{ url_for('user.change_password') }}"
    method="POST" class="form pure-form pure-form-stacked" role="form">
    {{ form.hidden_tag() }}

    <label for="{{form.old_password.id}}">{{form.old_password.label.text}}</label>
    {{ form.old_password(tabindex=10, autocomplete='off') }}
    {% for e in (form.old_password.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    <label for="{{form.new_password.id}}">{{form.new_password.label.text}}</label>
    {{ form.new_password(tabindex=20, autocomplete='off') }}
    {% for e in (form.new_password.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}

    {% if config.USER_REQUIRE_RETYPE_PASSWORD %}
    <label for="{{form.retype_password.id}}">{{form.retype_password.label.text}}</label>
    {{ form.retype_password(tabindex=30, autocomplete='off') }}
    {% for e in (form.retype_password.errors or []) %}
      <span class="pure-form-message">{{ e }}</span>
    {% endfor %}
    {% endif %}

    <button type="submit" class="pure-button pure-button-primary" tabindex=90>
      Change Password
    </button>
</form>
{%- endmacro %}

{%- macro reset_password_form(form) -%}
{%- endmacro %}
